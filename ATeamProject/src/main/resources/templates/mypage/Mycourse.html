<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/Mypage.css}">
    <link rel="stylesheet" th:href="@{/fragment.css}">
    <script src="https://kit.fontawesome.com/86c06c2025.js" crossorigin="anonymous"></script>

</head>
<body>
     <!-- ***************************************************** Navbar
     ***************************************************** -->
    <nav th:replace="~{navbar :: navbarFragment}"></nav>
    <!-- ****************************** login_modal
    ***************************************************** -->
    <div th:replace = "~{modal :: modalFragment}"></div >
    <!-- ****************************** main
    ***************************************************** -->
    
    <div class = "sectionAll">
    	<div class="sectionTop">
    		<a id="profile" th:href="@{|/user/mypage|}">
    			<div class="profile">
    				<img th:if ="${#strings.contains(member.profileImg.fileurl,'profileImg')}" th:src="@{|/image/profileImg/${member.profileImg.filename}|}">
    				<img th:if ="${#strings.isEmpty(member.profileImg.fileOriName)}" src="/image/noimage.png">
    				<div class="name">
    					<span th:text="${member.nickname}"></span>
    					<span th:text="${member.memberId}"></span>
    				</div>
    			</div>
    		</a>
    		<a id="subscription">
    			<span>정기권<br>구독하기</span>
    		</a>
    	</div>
    	<div class = "sectionBottom">
    		<div class = "sectionNav">
    			<a>
    				<div class="navBtn">
    					<span>구독 관리</span>
    				</div>
    			</a>
    			<a th:href="@{|/user/mypage|}">
    				<div class="navBtn">
    					<span>회원 정보 관리</span>
    				</div>
    			<a th:href="@{|/user/mypage/mycareer|}"
    			sec:authorize="isAuthenticated()"
	         	th:if="${#authentication.getPrincipal().getUsername() == member.memberId && #strings.contains(member.instructorYn,'Y')}">
    				<div class="navBtn">
    					<span>내 이력 관리</span>
    				</div>
    			</a>
    			</a>
    			<a th:href="@{|/user/mypage/mycourse|}" 
    			sec:authorize="isAuthenticated()"
	         	th:if="${#authentication.getPrincipal().getUsername() == member.memberId && #strings.contains(member.instructorYn,'Y')}">
    				<div class="navBtn">
    					<span>내 강의 관리</span>
    				</div>
    			</a>
    			<a>
    				<div class="navBtn">
    					<span>설정</span>
    				</div>
    			</a>
    			<a>
    				<div class="navBtn">
    					<span>로그아웃</span>
    				</div>
    			</a>
    		</div>
    		<div class = "sectionContent">
    			<div class="contentTop">
    				<h3>내 강의 관리</h3>
    				<a th:href="@{|/create|}"><button>새 강의 생성</button></a>
    			</div>
    			<div th:each="course : ${member.courseList}">
    				<a th:href="@{|/course/${course.courseKey}|}">
    					<div class="box">
  							<img th:each="file : ${course.fileList}" th:if ="${#strings.contains(file.fileurl,'banner')&& !#strings.isEmpty(file.fileOriName)}" th:src="@{|/image/banner/${file.filename}|}">
	           				<img th:each="file : ${course.fileList}" th:if ="${#strings.contains(file.fileurl,'banner')&& #strings.isEmpty(file.fileOriName)}" src="/image/noimage.png">
 	 						<span th:text="${course.title}"></span>
						</div>
    				</a>
    			</div>
    		</div>
    	</div>
    </div>
    

        <!-- ***************************************************** FOOTER
     ***************************************************** -->
        <footer th:replace = "~{footer :: footerFragment}"></footer>
        
  <script th:src="@{/MypageModule.js}"></script>
  <script th:src="@{/fragment.js}"></script>

</body>
</html>